<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="module" defer>
      import { evaluateGraph } from "./util/audio-comparer.js";
      import { evaluate, test } from "./util/audit.js";

      test((async () => {
        const renderLength = 1;
        const myGraph = context => {
          const osc = new OscillatorNode(context, {type: "sawtooth"});
          const gain = new GainNode(context, {gain: 2.2});
          const biquadFilter = new BiquadFilterNode(context, {type: "bandpass", frequency: 1000, Q: 10});

          osc.connect(gain).connect(biquadFilter).connect(context.destination);
          osc.start();
        };

        return await evaluateGraph(myGraph, renderLength);
      })());

      evaluate(async testResult => await testResult > 0.9999);
    </script>
    <title>Web Audio Graph Evaluation</title>
  </head>
  <body>
    <h1>Web Audio Graph Evaluation</h1>
    <p>Build a Web Audio graph with both realtime AudioContext and OfflineContext. Record output buffers and compare
      differences.</p>
  </body>
</html>
